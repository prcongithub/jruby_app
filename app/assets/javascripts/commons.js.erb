var connect_colorbox_hash = {width:"460px",height:"360px",rel:'nofollow',overlayClose:false, escKey:false}
var default_colorbox_hash = {width:"450px", height:"350px",rel:'nofollow',onComplete : function() { 
       $(this).colorbox.resize(); 
  } };
  
var video_colorbox_hash = {width:"650px", height:"500px",rel:'nofollow',onComplete : function() { 
       //$(this).colorbox.resize(); 
  } };
    
var order_colorbox_hash = {width:"70%", height:"70%",rel:'nofollow',overlayClose:false, escKey:false};
var crop_colorbox_hash = {width:"95%", height:"95%",rel:'nofollow'};
var medium_colorbox_hash = {width:"50%", height:"50%",rel:'nofollow'};
var small_colorbox_hash = {width:"25%", height:"25%",rel:'nofollow'};
var asset_edit_colorbox_hash = {width:"300px", height:"300px", inline:true,rel:'nofollow'};
var message_colorbox_hash = {width:"75%", height:"75%", inline:true,rel:'nofollow', href:"#new_message_form_div_common",overlayClose:false, escKey:false};
var new_product_colorbox_hash = {width:"85%",height:"85%",rel:'nofollow'};
var gallery_colorbox_hash = {width:"75%", height:"75%",rel:'nofollow'};
var submit_order_colorbox_hash = {width:"50%", height:"30%",rel:'nofollow',overlayClose:false, escKey:false};
var lookbook_colorbox_hash = {width:"50%", height:"50%",rel:'nofollow',overlayClose:false, escKey:false};
var press_release_colorbox_hash = {width:"40%", height:"60%",rel:'nofollow',overlayClose:false, escKey:false};
var preview_asset_colorbox_hash = {width:"40%", height:"60%",rel:'nofollow',overlayClose:false, escKey:false};
var preview_colorbox_hash = {width:"80%", height:"80%",rel:'nofollow',overlayClose:true, escKey:true};

var upload_logo_colorbox_hash = {width:"40%", height:"50%",rel:'nofollow',close:"X",overlayClose:false, escKey:false};
var upload_photos_colorbox_hash = {width:"50%", height:"50%",rel:'nofollow',close:"X",overlayClose:false, escKey:false};
var finalize_linesheets_colorbox_hash = {width:"70%", height:"70%",rel:'nofollow',close:"X",overlayClose:false, escKey:false};
var confirm_account_colorbox_hash = {width:"40%", height:"20%",rel:'nofollow',close:"X",overlayClose:false, escKey:false};
var approve_lookbooks_colorbox_hash = {width:"40%", height:"50%",rel:'nofollow',close:"X",overlayClose:false, escKey:false};
var update_contact_colorbox_hash = {width:"70%", height:"85%",rel:'nofollow',close:"X",overlayClose:false, escKey:false};

// Numeric only control handler
jQuery.fn.ForceNumericOnly =
function(length)
{
		if(typeof(length) === "undefined"){
			length = 10000;
		}
		return this.each(function()
    {
        $(this).keydown(function(e)
        {
        	  var key = e.charCode || e.keyCode || 0;
            // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
            action_key_valid = (
            		key == 8 || 
                key == 9 ||
                key == 46 ||
                (key >= 37 && key <= 40)
        		);
            key_valid =  (
            		key == 189 ||
                key == 190 ||
                (key >= 48 && key <= 57) ||
                (key >= 96 && key <= 105)
            );

            if($(this).val().length == length && !action_key_valid){
        			return false;
      			}else{
      				return (key_valid || action_key_valid);
      			}	
        });
    });
};

// Numeric only control handler
jQuery.fn.ForceIntegerOnly =
function(length)
{
		if(typeof(length) === "undefined"){
			length = 10000;
		}
    return this.each(function()
    {
        $(this).keydown(function(e)
        {
        	  var key = e.charCode || e.keyCode || 0;
            // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
            action_key_valid = (
            		key == 8 || 
                key == 9 ||
                key == 46 ||
                (key >= 37 && key <= 40)
        		);
            key_valid = (
                (key >= 48 && key <= 57) ||
                (key >= 96 && key <= 105)
            );

            if($(this).val().length == length && !action_key_valid){
        			return false;
      			}else{
      				return (key_valid || action_key_valid);
      			}		
        });
    });
};

// Numeric only control handler
jQuery.fn.ForceAlphaNumericOnly =
function(length)
{
		if(typeof(length) === "undefined"){
			length = 10000;
		}
    return this.each(function()
    {
        $(this).keydown(function(e)
        {
            var key = e.charCode || e.keyCode || 0;
            // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
            action_key_valid = (
            		key == 8 || 
                key == 9 ||
                key == 46 ||
                (key >= 37 && key <= 40)
        		);
                
						key_valid = (
								key == 189 ||	
                (key >= 65 && key <= 90) ||
                (key >= 48 && key <= 57) ||
                (key >= 96 && key <= 105)
            );

						if($(this).val().length == length && !action_key_valid){
        			return false;
      			}else{
      				return (key_valid || action_key_valid);
      			}		
        });
    });
};

// Numeric only control handler
jQuery.fn.ForceTextOnly =
function()
{
    return this.each(function()
    {
        $(this).keydown(function(e)
        {
            var key = e.charCode || e.keyCode || 0;
            // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
            return (key >= 65 && key <= 90);
        });
    });
};

(function($){
        
        $.fn.placeholder = function() {
                
                if($(this).attr("type") == "password") {
                
                        var original_pass_field = $(this);
                        var pass_placeholder_name = "pass_placeholder_" + $(this).attr("name");
                        var pass_placeholder_id = "pass_placeholder_" + $(this).attr("id");
                        if(original_pass_field.val() == "") {
                                $(this).parent().append("<input type=\"text\" style=\"color:#777777;\" value=\""+ $(this).attr("placeholder") +"\" name=\""+pass_placeholder_name+"\" class=\"form-text\" id=\""+pass_placeholder_id+"\">");
                                $(this).css("display","none");
                        }


                        $("#"+pass_placeholder_id+"").focus(function() {
                                var holder_id = $(this).attr("id").replace("pass_placeholder_","");
                                var holder = $("#" + holder_id);
                                if(holder.val() == "") {
                                        $(this).css("display","none");
                                        original_pass_field.css("display","");
                                        original_pass_field.focus();
                                }
                        });

                        $(this).blur(function() {
                            var original_pass_field = "pass_placeholder_" + $(this).attr("id");
                            var original_pass_field = $("#" + original_pass_field);
                          if(original_pass_field.val() == "") {
                                        $(this).css("display","block");
                                        original_pass_field.css("display","none");
                                }
                        });

                } else {

                        if($(this).val() === "") {
                                $(this).val($(this).attr("placeholder"));
                                $(this).css("color","#777777");
                        }

                        $(this).focus(function() {
                                if($(this).val() === $(this).attr("placeholder")) {
                                        $(this).css("color","#000000");
                                        $(this).val("");
                                }
                        }).blur(function() {
                                if($(this).val() === "") {
                                        $(this).css("color","#777777");
                                        $(this).val($(this).attr("placeholder"));
                                }
                        });
                }

        } 
        
})(jQuery);


function after_email_validated(result){
	if(result.success){
		alert("Email already taken!");
	}else{
		alert("Email available!");
	}
}

function after_email_validated_error(result){
	alert("Could not validate email!");
}

function after_approve(result){
	if(result.success){
		var url = "";
		var anchor = "";
		if(result.approved){
			url = "/approve?entity_type="+result.class_name+"&entity_id="+result.object_id+"&value=false&update_div="+result.class_name+"_"+result.object_id+"&authenticity_token="+result.token;
			anchor = "<a href='#' onclick='approveObject("+url+",after_approve,after_approve_error)'>Unapprove</a>";
		}else{
			url = "/approve?entity_type="+result.class_name+"&entity_id="+result.object_id+"&value=true&update_div="+result.class_name+"_"+result.object_id+"&authenticity_token="+result.token;
			anchor = "<a href='#' onclick='approveObject("+url+",after_approve,after_approve_error)'>Approve</a>";
		}
		jQuery("#"+result.class_name+"_"+result.object_id).html(anchor);
	}else{
		if(result.approved){
			alert("Failed to unapprove!");
		}else{
			alert("Failed to approve!");
		}
	}
}

function invite_sent(){
	jQuery("#loading_gif_new_invite").hide();
	jQuery("#submit_invite").show();

}

function sending_invite(){
	jQuery("#loading_gif_new_invite").show();
	jQuery("#submit_invite").hide();
}

function add_colorbox_invite_events(){
	jQuery("#loading_gif_new_invite").hide();
	jQuery("#new_invite")
		.bind("ajax:beforeSend",  function(evt, xhr, settings){
				jQuery("#loading_gif_new_invite").show();
				jQuery("#submit_invite").hide();
	});
}

function after_approve_error(result){
	alert("Failed to approve!");
}

function approveObject(url,success_callback_function,failure_callback_function){
	jQuery.ajax(url, {
			type: 'POST',
			data: {},
			dataType: 'json',
			success: function(response) { 
				success_callback_function(response);
			},
			error: function(response) { 
				failure_callback_function(response);
			}
	});	
}

function jsonRequest(url,dataHash,success_callback_function,failure_callback_function){
	jQuery.ajax(url, {
			type: 'POST',
			data: dataHash,
			dataType: 'json',
			success: function(response) { 
				success_callback_function(response);
			},
			error: function(response) { 
				failure_callback_function(response);
			}
	});	
}

function jsRequest(url,dataHash,type){
	if(type == undefined || type== null || type==''){
		type = 'POST';
	}
	jQuery.ajax(url, {
			type: type,
			dataType: 'script',
			data: dataHash
	});	
}


function checkEmail(url,success_callback_function,failure_callback_function){
	jQuery.ajax(url, {
			type: 'POST',
			data: {},
			dataType: 'json',
			success: function(response) { 
				success_callback_function(response);
			},
			error: function(response) { 
				failure_callback_function(response);
			}
	});
}

function validateEmail(email) { 
		var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		//var re = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
		return re.test(email);
} 
		
		
function updateStatus(entity_type,entity_id,text_field,update_field){
	var status = jQuery("#"+text_field).val();
	var dataHash = {entity_type : entity_type,entity_id : entity_id,status : status,update_div:update_field}
	jQuery("#update_status_link").hide();
	jQuery("#update_status_loader").show();
	jQuery("#"+text_field).val("");
	if(entity_type == "Brand"){
		jsRequest("/brands/update_status",dataHash);
	}else{
		jsRequest("/boutiques/update_status",dataHash);
	}
}
	
function add_autocomplete_event_for_input(url,input,callback_function,multiple){
	multiple = typeof multiple !== 'undefined' ? multiple : false;
	options = {
		source: url,
		select: function(event,ui) {
			callback_function(ui.item);
		},
		close: function(event, ui){
			if(multiple){
				$("#"+input).val("");
			}
			if($("#"+input).next().is('img')){
				$("#"+input).next().remove();
			}
		},
		change: function(event, ui){
			if($("#"+input).next().is('img')){
				$("#"+input).next().remove();
			}
		},
		search: function(event,ui){
			if($("#"+input).next().is('img')){
				
			}else{
				$("#"+input).after("<img src='"+"<%= asset_path('fb_loader_small.gif') %>"+"'>");
			}
		}
	};
	$("#"+input).autocomplete(options);
}

function removeByElement(arrayName,arrayElement)
{
	for(var i=0; i<arrayName.length;i++ )
	{ 
		if(arrayName[i]==arrayElement)
			arrayName.splice(i,1); 
	} 
}

function joinArray(arrayName,joinWith)
{
	var str = "";
	for(var i=0; i<arrayName.length;i++ )
	{ 
		if(i == (arrayName.length - 1)){
			str = str + arrayName[i];
		}else{
			str = str + arrayName[i] + joinWith;
		}
	} 
	return str;
}

function getKeys(obj){
	var keys = new Array();
	for(var key in obj)
	{
		  keys.push(key);
	}
	return keys;
}

function getValues(obj){
	var values = new Array();
	for(var key in obj)
	{
		  values.push(obj[key]);
	}
	return values;
}

function unload_page(){
	
}

function printElem(elem,width,height)
{
	if(typeof(width) == 'undefined'){
		width = 600;
	}
	if(typeof(height) == 'undefined'){
		height = 400;
	}
	Popup($(elem).html(),width,height);
}

function Popup(data) 
{
	var mywindow = window.open('', 'my div', 'height=400,width=600');
	mywindow.document.write('<html><head><title>my div</title>');
	/*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
	mywindow.document.write('</head><body >');
	mywindow.document.write(data);
	mywindow.document.write('</body></html>');
	mywindow.document.close();
	mywindow.print();
	return true;
}


function add_ajax_loader_event(element_to_bind,element_to_show,element_to_hide){
	jQuery("#"+element_to_bind)
		.bind("ajax:beforeSend",  function(evt, xhr, settings){
			jQuery("#"+element_to_show).show();
			jQuery("#"+element_to_hide).hide();
		});
}

function get_root(){
	var root = location.protocol+"//"+location.host;
	return root;
}
